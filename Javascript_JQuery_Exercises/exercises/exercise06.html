<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
    <meta name="description" content="description" />
    <meta name="keywords" content="keywords" />
    <meta name="author" content="author" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="../default.css" media="screen" />
    <title>Exercise 06 - Advertisement</title>
    <script type="text/javascript" src="../jquery.js"></script>
    <script type="text/javascript">
    </script>
</head>

<body>
    <div class="container2">

        <div class="header">
            <div class="title">
                Exercise 06
                <h1>Advertisement</h1>
            </div>
        </div>

        <div class="navigation">
            <a href="../index.html">Home</a>
            <div class="clearer"><span></span>
            </div>
        </div>

        <div class="main">
            <div class="content">

                <p>
                    下面為一個廣告區塊，左邊是主頁，右邊是選項。主頁有兩種狀態：
                    <li>當滑鼠沒有在選項上時，每隔5秒自動更新</li>
                    <li>當滑鼠移到選項上時，會隨著不同選項而更新。滑鼠停留在選項上停止自動更新</li>
                    <br/>
                    <blockquote>Hint: <a target="_blank" href="http://www.w3schools.com/tags/tag_area.asp">HTML area</a>
                    </blockquote>
                </p>

                <!-- main part-->
                <img id="ad" src="img/ex5ad1.jpg" />
                <img id="adpic" src="img/select.jpg" usemap="#planetmap" />
                <!-- menu -->
                <map id="planetmap" name="planetmap">
                    <area shape="rect" coords="0,0,100,66" href="img/ex5ad1.jpg" />
                    <area shape="rect" coords="0,67,100,133" href="img/ex5ad2.jpg" />
                    <area shape="rect" coords="0,134,100,200" href="img/ex5ad3.jpg" />
                </map>
            </div>

            <div class="clearer"><span></span>
            </div>

        </div>

        <div class="footer">&copy; 2006 <a href="index.html">Website.com</a>. Valid <a href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a> &amp; <a href="http://validator.w3.org/check?uri=referer">XHTML</a>. Template design by <a href="http://templates.arcsin.se">Arcsin</a>
        </div>
    </div>
	<script>
		var delayTime = 5000; // delay for 5s
		var picIndex = 1; // 第一張圖片
        var picCount = 3; // 目前有三張圖片
        var myVar = setInterval(updatePicture_auto, delayTime);

        $(document).ready(function() {
            $.each($("#planetmap area"), function(i, item) {
                console.log(i + " " + item);
            });
            $("#planetmap").hover(function() { // monse hover in 
                console.log("hover in ");
                clearInterval(myVar);
            },function() { // mouse hover out
                console.log("hover out ");
                myVar = setInterval(updatePicture_auto, delayTime);
            });
        });
		
		$("#planetmap").on("mousemove", function(event) {
			updatePicture_hover(event.pageY);
		});
		
		function updatePicture_auto() { // 自動更換圖片，每經過delayTime就會換一次圖片
			picIndex = picIndex + 1;
            if(picIndex > picCount) // picIndex++之後，如果picIndex超過picCount的話，減去picCount回到第一張圖片
                picIndex = picIndex - picCount;
            var picPath = "img/ex5ad" + picIndex + ".jpg";
			$("#ad").attr("src", picPath);
		}
		
		function updatePicture_hover(coordY) { // 以滑鼠在圖片裡的座標決定廣告區塊的內容要更換成哪張圖片
			var offset = parseInt($("#adpic").offset().top); // 取出#adpic這個元件距離頂端多少pix
			var mouseCoordY = coordY-offset; // 利用目前滑鼠的Y座標減去offset就能得知滑鼠位於圖片的Y座標是多少
			
			if(mouseCoordY < 67) {
				$("#ad").attr("src", "img/ex5ad1.jpg");
				picIndex = 1;
			}
			else if (mouseCoordY > 133) {
				$("#ad").attr("src", "img/ex5ad3.jpg");
				picIndex = 3;
			}
			else {
				$("#ad").attr("src", "img/ex5ad2.jpg");
				picIndex = 2;
			}
		}
		
		
	</script>
</body>

</html>
